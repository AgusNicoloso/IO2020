<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Simple Map</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
      integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2"
      crossorigin="anonymous"
    />
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBIwzALxUPNbatRBj3Xi1Uhp0fFzwWNBkE&callback=initMap&libraries=&v=weekly"
      defer
    ></script>

    <style type="text/css">
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
        width: 80%;
        float: left;
      }
      #formulario {
        float: right;
      }

      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
      <div id="formulario">
        <input type="text" placeholder="Punto A" id="puntoa"/>
        <br>
        <input type="text" placeholder="Punto B" id="puntob"/>
        <br>
        <input type="button" value="Agregar punto" class="add" id="add" />
      </div>
      <input type="submit" value="Calcular ruta" onclick="calculateAndDisplayRoute()"></input>
  </body>
  <script>
      function initMap() {
  /*var pointA = new google.maps.LatLng(40.7519, -1.2578),
    pointB = new google.maps.LatLng(50.8429, -0.1313),
    myOptions = {
      zoom: 10,
      center: pointA
    },
    map = new google.maps.Map(document.getElementById('map'), myOptions),
    // Instantiate a directions service.
    directionsService = new google.maps.DirectionsService,
    directionsDisplay = new google.maps.DirectionsRenderer({
      map: map
    }),
    markerA = new google.maps.Marker({
      position: pointA,
      title: "point A",
      label: "A",
      map: map
    }),
    markerB = new google.maps.Marker({
      position: pointB,
      title: "point B",
      label: "B",
      map: map
    });

  // get route from A to B
  calculateAndDisplayRoute(directionsService, directionsDisplay, pointA, pointB);*/
  map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: -38.00042, lng: -57.5562 },
          zoom: 12,
        });
}
function calculateAndDisplayRoute() {
   // location.reload();
   map = new google.maps.Map(document.getElementById("map"), {
          center: { lat: -38.00042, lng: -57.5562 },
          zoom: 12,
        });
    directionsService = new google.maps.DirectionsService,
    directionsDisplay = new google.maps.DirectionsRenderer({
      map: map
    });
    var pointa = document.getElementById("puntoa").value;
    var pointb = document.getElementById("puntob").value;
  directionsService.route({
    origin: pointa,
    optimizeWaypoints: true,
    destination: pointb,
    travelMode: google.maps.TravelMode.DRIVING,
    waypoints: [
    {
      location: 'Miramar, BA'
    }, {
      location: 'Batan, BA'
    },{
      location: 'Chapadmalal, BA'
    }
    ]
    
  }, function(response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        
      directionsDisplay.setDirections(response);
      console.log(response);
      console.log(response.routes[0].legs[0].distance.text);
        console.log(response.routes[0].legs[0].duration.text);
    } else {
      window.alert('Directions request failed due to ' + status);
    }
  });
}

initMap();
    
  </script>
  <script
    src="https://code.jquery.com/jquery-3.5.1.js"
    integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"
  ></script>
  <script src="logic.js"></script>

  <script
    src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"
  ></script>
  <script
    src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
    integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s"
    crossorigin="anonymous"
  ></script>
</html>
